<% if @s3_direct_post.nil? %>
  <% @s3_direct_post = S3_BUCKET.presigned_post(key: "videoUploads/#{Time.now.getlocal('-05:00').to_date}/#{SecureRandom.uuid}/${filename}", success_action_status: '201') %>
<% end %>


<%= form_for(@video, html: { class: 'directUpload', id: 'video-submit-form', data: { 'form-data' => (@s3_direct_post.fields), 'url' => @s3_direct_post.url, 'host' => URI.parse(@s3_direct_post.url).host } }) do |f| %>

  <div>
    <div class="form-group form-group-custom-margin">
      <%= f.label :Author, 'Author' %>
      <%= f.text_field :author, :class => 'form-control' %>
    </div>
    <div class="form-group form-group-custom-margin">
      <%= f.label :Author_Email, 'Author Email' %>
      <%= f.text_field :author_email, :class => 'form-control' %>
    </div>
    <div class="form-group form-group-custom-margin">
      <%= f.label :title, 'Video Title' %>
      <%= f.text_field :title, :class => 'form-control'%>
    </div>
    <div class="form-group form-group-custom-margin">
      <%= f.label :description, 'Video Description' %>
      <%= f.text_area :description, :class => 'form-control' %>
    </div>
    <% if !@video.author_email.nil?  %>
      <div class="form-group field">
      <%= f.label :vimeo_video_id, 'Vimeo Video ID' %>
        <%= f.text_area :vimeo_video_id, :class => 'form-control' %>
      </div>
    <% end %>
    <% if !@video.author_email.nil?  %>
      <div class="form-group field">
      <%= f.label :frame, 'Video Iframe' %>
        <%= f.text_area :frame, :class => 'form-control', size: "3x10" %>
      </div>
    <% end %>
    <% if @video.author_email.nil?  %>
      <div class="field file">
        <%= f.file_field :url %>
        <%= button_tag "Select a video file", :type => 'button', :class => "btn btn-xs btn-info fileButton"%>
      </div>
    <% end %>
    <div class="actions">
      <%= f.submit 'Submit Video', :class => "btn btn-primary" %>
    </div>

    <% if @video.errors.any? %>
      <div class="alert alert-danger">
        <ul>
          <% @video.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>  
  </div> 
<% end %>
